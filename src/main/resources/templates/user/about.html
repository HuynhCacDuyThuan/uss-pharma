<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Giới Thiệu | USS Pharma</title>
<meta name="description"
	content="Giới Thiệu CÔNG TY TNHH DƯỢC PHẨM QUỐC TẾ USS">
<meta name="keywords"
	content="Giới Thiệu CÔNG TY TNHH DƯỢC PHẨM QUỐC TẾ USS">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<!-- Font Awesome Icons -->
<link th:href="@{/css/footer.css}" rel="stylesheet">
<link rel="stylesheet"
	th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css}">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
	rel="stylesheet">
<link th:href="@{/css/index.css}" rel="stylesheet">
<link th:href="@{/css/about.css}" rel="stylesheet">
</head>
<body>
	<!-- Gọi Header -->
	<th:block th:replace="~{fragments/header :: header}"></th:block>
	<div class="content">
		<section class="container py-5 mt-5">
			<h1 class="section-title">Giới Thiệu Chung</h1>
			<p class="about-text">Công ty TNHH Dược phẩm Quốc tế USS với hơn
				10 năm kinh nghiệm trong lĩnh vực phân phối Dược phẩm, Thực phẩm
				dinh dưỡng Y tế cao cấp.</p>

			<h2 class="section-title">I. Thông Tin Đơn Vị</h2>

			<!-- Image added to the "Thông Tin Đơn Vị" section -->


			<ul class="about-text">
				<li><strong>Tên doanh nghiệp:</strong> Công ty TNHH Dược phẩm
					Quốc tế USS</li>
				<li><strong>Tên tiếng Anh:</strong> Uss International
					Pharmaceutical Company Limited</li>
				<li><strong>Tên viết tắt:</strong> USS.PHARMA CO.,LTD</li>
				<li><strong>Trụ sở chính:</strong> 157 Đống Đa, Phường Thị Nại,
					TP. Quy Nhơn, Bình Định, Việt Nam</li>
				<li><strong>Điện thoại:</strong> 090 357 77 27 – 0928 666622</li>
				<li><strong>Email:</strong> <a
					href="mailto:uss.intl.pharma@gmail.com">uss.intl.pharma@gmail.com</a></li>
				<li><strong>Website:</strong> <a
					href="https://ctyduocphamquocteuss.com" target="_blank">ctyduocphamquocteuss.com</a></li>

				<li><strong>Mã số thuế:</strong> 4101492362</li>
				<li><strong>Đại diện pháp luật:</strong> Ông Nguyễn Ngọc Thi</li>
			</ul>
			<img
				src="https://ctyduocphamquocteuss.com/wp-content/uploads/2023/12/z4941689893751_43787e8807270c4b1695152938d1a095-1024x706.jpg"
				alt="Công ty TNHH Dược phẩm Quốc tế USS" class="info-image">
			<h2 class="section-title">II. Logo Công Ty</h2>
			<img
				src="https://ctyduocphamquocteuss.com/wp-content/uploads/2025/03/logo-uss.jpg"
				alt="USS Pharma Logo" class="logo">
			<p class="about-text">Ngành nghề kinh doanh: Mua bán thực phẩm
				chức năng, yến sào và thực phẩm khác; Bán buôn dược phẩm và dụng cụ
				y tế.</p>

			<div class="info-section">
				<h3 class="section-title">Phương Châm Hoạt Động</h3>
				<p>
					Là <strong>Nhà Phân Phối, Tổng Thầu Miền Trung</strong> về ngành
					hàng Dược phẩm, thực phẩm (<em>đặc biệt là dòng sữa bột Y tế
						cao cấp, sữa công thức pha sẵn, sữa dinh dưỡng chất lượng,…</em>), với
					phương châm kinh doanh <strong>“Chia sẻ lợi ích tốt nhất
						cho khách hàng”</strong> _ chúng tôi mong muốn cung cấp giá trị tốt nhất
					cho khách hàng và nâng cao sự hợp tác giữa các bên. <strong>Uss
						Pharma</strong> xin trân trọng gửi lời mời hợp tác đến <strong>Quý
						khách hàng</strong> để cùng thực hiện chung các định hướng phát triển thị
					trường nhằm gia tăng giá trị, quảng bá thương hiệu chung cho cả hai
					bên.
				</p>
			</div>
			<div class="info-section">
				<h3 class="section-title">Giá Trị Cốt Lõi</h3>

				<p>USS PHARMA chúng tôi luôn luôn:</p>
				<!-- Bootstrap list-group for styling -->
				<ul class="list-group custom-list">
					<li class="list-group-item">Lấy chất lượng, an toàn hiệu quả
						làm cam kết cao nhất.</li>
					<li class="list-group-item">Lấy tri thức, sáng tạo làm nền
						tảng cho sự phát triển.</li>
					<li class="list-group-item">Lấy uy tín, chất lượng làm nền
						tảng.</li>
					<li class="list-group-item">Lấy thích ứng nhanh làm sức mạnh
						cạnh tranh.</li>
					<li class="list-group-item">Lấy sự thịnh vượng cùng đối tác
						làm mục tiêu lâu dài.</li>
					<li class="list-group-item">Lấy lợi ích cộng đồng làm khởi sự
						cho mọi hoạt động.</li>
				</ul>
			</div>


		</section>

	</div>
	<div class="floating-contact">
		<!-- Zalo -->
		<div class="chat-toggle contact-icon" onclick="toggleChatBox()">
			<i class="fas fa-comment-dots"></i>
		</div>

		<!-- Facebook -->
			<!-- Facebook -->
		<a href="https://www.facebook.com/profile.php?id=61553924450827" target="_blank"
			class="contact-icon"> <i class="fab fa-facebook-f"></i>
		</a>
		<!-- TikTok -->
		<a href="https://www.tiktok.com/@uss.pharmaco" target="_blank"
			class="contact-icon"> <i class="fab fa-tiktok"></i>
		</a>
		<!-- YouTube -->
		<a href="https://www.youtube.com/@CONGTYTNHHDUOCPHAMQUOCTEUSS?sttick=0"
			target="_blank" class="contact-icon"> <i class="fab fa-youtube"></i>
		</a>


	</div>
	<th:block th:replace="~{fragments/footer-user :: footer-user}"></th:block>
	<!-- Bootstrap JS and dependencies -->

<div id="miniChatBox" class="chat-box">
    <div class="chat-header">
        <strong>Hỗ trợ trực tuyến</strong> <span onclick="toggleChatBox()" class="chat-close">&times;</span>
  
    </div>
    <div class="chat-body" id="chatBody">
        <ul id="chatList">
            <!-- List of predefined questions -->
            <li class="chat-question" onclick="showAnswer(this)">Xin chào! Bạn cần hỗ trợ gì?</li>
            <li class="chat-question" onclick="showAnswer(this)">Liên hệ với chúng tôi</li>
      <li th:each="msg : ${chatMessages}"
      th:text="${msg.content}"
      th:class="${msg.sender.username} == ${username} ? 'chat-message me' : 'chat-message user'">
  </li>
</li>
        </ul>
    </div>
   <div class="chat-input">
    <!-- Check if the user is authenticated -->
<div sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_USER')">
    <input type="text" id="chatMessage" placeholder="Nhập tin nhắn..." />
    <button onclick="sendMessage()">Gửi</button>
</div>
    
    <!-- If not authenticated, show the login modal -->
    <div sec:authorize="!isAuthenticated()">
      <input type="text" id="chatMessage" placeholder="Nhập tin nhắn..." />
        <button onclick="showLoginModal()">Gửi</button>
    </div>
</div>
</div>
	<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Vui lòng đăng nhập để chat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Để gửi tin nhắn, bạn cần đăng nhập trước.
            </div>
            <div class="modal-footer">
             
                <a href="/login" class="btn btn-primary">Đăng nhập</a>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.2/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
	
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

<script>
	let stompClient = null;
	let connected = false;  // Track if the WebSocket is connected

	// Connect to WebSocket using SockJS
	// Connect to WebSocket using SockJS
function connectWebSocket() {
    const socket = new SockJS('/ws');  // This should match your server-side "/ws" endpoint
    stompClient = StompJs.Stomp.over(socket); 
    stompClient.connect({}, function (frame) {
        console.log('Connected: ' + frame);
        connected = true;  // Set the connected flag to true after a successful connection
        subscribeToMessages();  // Subscribe to receive messages
    }, function (error) {
        console.error('Error connecting to WebSocket: ', error);
        connected = false;  // Set connected flag to false if connection fails
    });
}


	// Send a message using WebSocket
	function sendMessage() {
    const messageInput = document.getElementById("chatMessage");
    const messageContent = messageInput.value.trim();
    const senderUsername = document.getElementById("loggedInUser").textContent.trim();
    const receiverUsername = '0928666622'; // hoặc biến receiver nếu là dynamic

    if (!connected || !messageContent) return;

    const chatMessage = {
        senderUsername: senderUsername,
        receiverUsername: receiverUsername,
        content: messageContent
    };

    // ❌ KHÔNG append message tại đây nữa
    stompClient.send("/app/chat.send", {}, JSON.stringify(chatMessage));
    messageInput.value = "";
}

	function subscribeToMessages() {
	    const receiverUsername = '0928666622'; // hoặc dùng biến nếu động

	    stompClient.subscribe(`/topic/messages/${receiverUsername}`, function (messageOutput) {
	        const message = JSON.parse(messageOutput.body);
	        const sender = document.getElementById("loggedInUser").textContent.trim();
	        const chatList = document.getElementById("chatList");

	        // Tạo thẻ <li> đúng theo format giống Thymeleaf
	        const li = document.createElement("li");
	        li.textContent = message.content;

	        // Gán class theo người gửi
	        if (message.senderUsername === sender) {
	            li.className = "chat-message me";
	        } else {
	            li.className = "chat-message user";
	        }

	        chatList.appendChild(li);
	        chatList.scrollTop = chatList.scrollHeight;
	    });
	}

	// Initialize WebSocket connection when the page loads
	window.onload = function() {
	    connectWebSocket();
	    subscribeToMessages();
	
	};

	// Show login modal if user is not authenticated
	function showLoginModal() {
	    const myModal = new bootstrap.Modal(document.getElementById('loginModal'));
	    myModal.show();
	}

	function toggleChatBox() {
	    const chatBox = document.getElementById("miniChatBox");
	    chatBox.style.display = chatBox.style.display === "none" || chatBox.style.display === "" ? "flex" : "none";
	}

	
	
	function showAnswer(element) {
	    const questionText = element.textContent;
	    let answerText = "";

	    // Define answers to the questions
	    switch (questionText) {
	        case "Xin chào! Bạn cần hỗ trợ gì?":
	            answerText = "Chúng tôi cung cấp các dịch vụ hỗ trợ trực tuyến, vui lòng đăng nhập để nhắn tin trực tuyến.";
	            break;
	        case "Giới thiệu sản phẩm của bạn":
	            answerText = "Đê biết thêm chi tiết cụ thể sản.";
	            break;
	        case "Thông tin thanh toán":
	            answerText = "Chúng tôi chấp nhận thanh toán qua nhiều phương thức, bao gồm thẻ tín dụng và chuyển khoản ngân hàng.";
	            break;
	        case "Cách sử dụng website":
	            answerText = "Bạn có thể tìm kiếm sản phẩm, thêm vào giỏ hàng và thanh toán trực tiếp trên website.";
	            break;
	        case "Liên hệ với chúng tôi":
	            answerText = "Bạn có thể liên hệ qua email usspharmaco3007@gmail.com hoặc gọi số hotline: 092 866 66 22";
	            break;
	        default:
	            answerText = "Xin lỗi, chúng tôi không có câu trả lời cho câu hỏi này.";
	    }

	    // Create the answer element
	    const answer = document.createElement("div");
	    answer.classList.add("chat-answer");
	    answer.textContent = answerText;

	    // Append the answer at the end of the chat body, not after the question
	    const chatBody = document.getElementById("chatBody");
	    chatBody.appendChild(answer);

	    // Ensure the new answer is visible
	    answer.style.display = "block";

	    // Scroll the chat body to the bottom
	    chatBody.scrollTop = chatBody.scrollHeight;
	}

	

</script>
</body>
</html>
