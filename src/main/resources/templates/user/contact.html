<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Liên Hệ - Công ty TNHH Dược Phẩm Quốc tế USS</title>
<meta name="description"
	content="Liên Hệ - Công ty TNHH Dược Phẩm Quốc tế USS">
<meta name="keywords"
	content="Liên Hệ - Công ty TNHH Dược Phẩm Quốc tế USS">
<link rel="profile" href="http://gmpg.org/xfn/11">
<meta name="description"
	content="Địa chỉ: 157 Đống Đa, phường Thị Nại, TP. Quy Nhơn, Bình ĐịnhHotline: 090 357 77 27Email: uss.intl.pharma@gmail.com">
<meta name="robots"
	content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large">
<link rel="canonical" th:href="@{${url}}" />
<meta property="og:locale" content="vi_VN">
<meta property="og:type" content="article">
<meta property="og:title" content="Liên hệ - Công ty TNHH Dược Phẩm Quốc tế USS">
<meta property="og:description" content="Địa chỉ: 157 Đống Đa, phường Thị Nại, TP. Quy Nhơn, Bình ĐịnhHotline: 090 357 77 27Email: uss.intl.pharma@gmail.com">
<meta property="og:url" th:content="${url}" />
<meta property="og:site_name" content="Công ty TNHH Dược Phẩm Quốc tế USS">
<meta property="og:image" th:content="${url}" />
<meta property="og:image:secure_url" th:content="${url}" />
<meta property="og:image:width" content="501">
<meta property="og:image:height" content="323">
<meta property="og:image:alt" content="Liên hệ">
<meta property="og:image:type" content="image/png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Liên hệ - Công ty TNHH Dược Phẩm Quốc tế USS">
<meta name="twitter:description" content="Địa chỉ: 157 Đống Đa, phường Thị Nại, TP. Quy Nhơn, Bình ĐịnhHotline: 090 357 77 27Email: uss.intl.pharma@gmail.com">

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link th:href="@{/css/index.css}" rel="stylesheet">
<link th:href="@{/css/footer.css}" rel="stylesheet">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<link rel="stylesheet"
	th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css}">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
	rel="stylesheet">
<style>
.contact-title {
	font-size: 20px;
	font-weight: bold;
	color: #2b3991;
	margin-bottom: 30px;
	text-align: center;
}

.contact-info p {
	font-size: 18px;
	color: #666;
	margin-bottom: 15px;
}

.social-icons a {
	color: #fff;
	margin-right: 15px;
	font-size: 24px;
}

.social-icons a:hover {
	color: #ed1c24;
}

.map-container {
	margin-top: 30px;
}

.map-container iframe {
	width: 100%;
	height: 400px;
	border: none;
	border-radius: 10px;
}

.contact-section {
	background-color: #f8f9fa;
	padding: 40px 0;
}

/* Card styling */
.contact-card {
	border: 2px solid #ffff;
	padding: 20px;
	border-radius: 10px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.contact-form input, .contact-form textarea {
	border-radius: 5px;
	border: 1px solid #ccc;
	padding: 10px;
	margin-bottom: 15px;
	width: 100%;
}

.contact-form button {
	background-color: #ed1c24;
	color: #fff;
	border: none;
	padding: 10px 20px;
	font-size: 16px;
	border-radius: 5px;
	cursor: pointer;
}

.contact-form button:hover {
	background-color: #c10d19;
}
</style>
</head>
<body>
	<th:block th:replace="~{fragments/header :: header}"></th:block>
	<div class="content">
		<!-- Contact Section -->
		<section class="contact-section mt-5">
			<div class="container">
				<!-- Title -->
				<h1 class="contact-title">Liên Hệ</h1>

				<!-- Contact Info -->
				<div class="row">
					<div class="col-md-12 contact-info">
						<h5>CÔNG TY TNHH Dược phẩm Quốc tế USS</h5>
						<p>
							<strong>Địa chỉ:</strong> 157 Đống Đa, phường Thị Nại, TP. Quy
							Nhơn, Bình Định
						</p>
						<p>
							<strong>Hotline:</strong> 090 357 77 27
						</p>
						<p>
							<strong>Email:</strong> <a
								href="mailto:uss.intl.pharma@gmail.com">uss.intl.pharma@gmail.com</a>
						</p>
					</div>

				</div>

				<!-- Map -->
				<div class="map-container">
					<h4>Vị trí của chúng tôi</h4>
					<iframe
						src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3874.9224743443533!2d109.22247117462378!3d13.783546886611555!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x316f6c82c0433ce9%3A0xd0ec5d99b6f74835!2zMTU3IMSQ4buRbmcgxJBhLCBUaOG7iyBO4bqjaSwgVGjDoG5oIHBo4buRIFF1aSBOaMahbiwgQsOsbmggxJDhu4tuaCwgVmnhu4d0IE5hbQ!5e0!3m2!1svi!2s!4v1700556665989!5m2!1svi!2s"
						width="100%" height="450" style="border: 0;" allowfullscreen=""
						loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
				</div>

				<!-- Contact Form Inside Card -->
				<div class="row mt-4">
					<div class="col-md-12">
						<div class="card contact-card">
							<h4 class="card-title text-center">Gửi Thông Tin Liên Hệ</h4>
							<form class="contact-form" id="contactForm">
								<div class="mb-3 row">
									<div class="col-md-6">
										<input type="text" id="name" class="form-control"
											placeholder="Tên của bạn" required>
									</div>
									<div class="col-md-6">
										<input type="email" id="email" class="form-control"
											placeholder="Email của bạn" required>
									</div>
								</div>
								<textarea id="content" class="form-control" rows="5"
									placeholder="Nội dung" required></textarea>
								<button type="submit">Gửi Thông Tin</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
	<div class="floating-contact">
		<!-- Zalo -->
		<div class="chat-toggle contact-icon" onclick="toggleChatBox()">
			<i class="fas fa-comment-dots"></i>
		</div>
		<!-- Facebook -->
		<!-- Facebook -->
		<a href="https://www.facebook.com/profile.php?id=61553924450827"
			target="_blank" class="contact-icon"> <i
			class="fab fa-facebook-f"></i>
		</a>
		<!-- TikTok -->
		<a href="https://www.tiktok.com/@uss.pharmaco" target="_blank"
			class="contact-icon"> <i class="fab fa-tiktok"></i>
		</a>
		<!-- YouTube -->
		<a
			href="https://www.youtube.com/@CONGTYTNHHDUOCPHAMQUOCTEUSS?sttick=0"
			target="_blank" class="contact-icon"> <i class="fab fa-youtube"></i>
		</a>


	</div>
	<th:block th:replace="~{fragments/footer-user :: footer-user}"></th:block>

	<div id="miniChatBox" class="chat-box">
		<div class="chat-header">
			<strong>Hỗ trợ trực tuyến</strong> <span onclick="toggleChatBox()"
				class="chat-close">&times;</span>

		</div>
		<div class="chat-body" id="chatBody">
			<ul id="chatList">
				<!-- List of predefined questions -->
				<li class="chat-question" onclick="showAnswer(this)">Xin chào!
					Bạn cần hỗ trợ gì?</li>
				<li class="chat-question" onclick="showAnswer(this)">Liên hệ
					với chúng tôi</li>
				<li th:each="msg : ${chatMessages}" th:text="${msg.content}"
					th:class="${msg.sender.username} == ${username} ? 'chat-message me' : 'chat-message user'">
				</li>
				</li>
			</ul>
		</div>
		<div class="chat-input">
			<!-- Check if the user is authenticated -->
			<div sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_USER')">
				<input type="text" id="chatMessage" placeholder="Nhập tin nhắn..." />
				<button onclick="sendMessage()">Gửi</button>
			</div>

			<!-- If not authenticated, show the login modal -->
			<div sec:authorize="!isAuthenticated()">
				<input type="text" id="chatMessage" placeholder="Nhập tin nhắn..." />
				<button onclick="showLoginModal()">Gửi</button>
			</div>
		</div>
	</div>
	<div class="modal fade" id="loginModal" tabindex="-1"
		aria-labelledby="loginModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="loginModalLabel">Vui lòng đăng
						nhập để chat</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">Để gửi tin nhắn, bạn cần đăng nhập
					trước.</div>
				<div class="modal-footer">

					<a href="/login" class="btn btn-primary">Đăng nhập</a>
				</div>
			</div>
		</div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.2/dist/sockjs.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script>
    document.getElementById('contactForm').addEventListener('submit', function (event) {
        event.preventDefault();  // Prevent form submission

        // Get form data
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const content = document.getElementById('content').value;

        // Create a contact object
        const contactData = {
            name: name,
            email: email,
            content: content
        };

        // Send data to the API
        fetch('/api/submit-contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(contactData)
        })
        .then(response => response.json())  // Ensure it's treated as JSON
        .then(data => {
            // Show success Toastify notification
            Toastify({
                text: data.message,
                duration: 3000,  // Duration of the toast in ms
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)", // Green color
                className: "info",  // Class name for the toast
                position: "right",  // Position of the toast (can be 'left', 'right', 'center')
                close: true  // Show a close button
            }).showToast();
        })
        .catch(error => {
            console.error('Error:', error);
            // Show error Toastify notification
            Toastify({
                text: "An error occurred. Please try again later.",
                duration: 3000,
                backgroundColor: "linear-gradient(to right, #ff5f6d, #ffc3a0)",  // Red color
                className: "error",  // Class name for the toast
                position: "right",
                close: true
            }).showToast();
        });
    });
</script>


	<script>
	let stompClient = null;
	let connected = false;  // Track if the WebSocket is connected

	// Connect to WebSocket using SockJS
	// Connect to WebSocket using SockJS
function connectWebSocket() {
    const socket = new SockJS('/ws');  // This should match your server-side "/ws" endpoint
    stompClient = StompJs.Stomp.over(socket); 
    stompClient.connect({}, function (frame) {
        console.log('Connected: ' + frame);
        connected = true;  // Set the connected flag to true after a successful connection
        subscribeToMessages();  // Subscribe to receive messages
    }, function (error) {
        console.error('Error connecting to WebSocket: ', error);
        connected = false;  // Set connected flag to false if connection fails
    });
}


	// Send a message using WebSocket
	function sendMessage() {
    const messageInput = document.getElementById("chatMessage");
    const messageContent = messageInput.value.trim();
    const senderUsername = document.getElementById("loggedInUser").textContent.trim();
    const receiverUsername = '0928666622'; // hoặc biến receiver nếu là dynamic

    if (!connected || !messageContent) return;

    const chatMessage = {
        senderUsername: senderUsername,
        receiverUsername: receiverUsername,
        content: messageContent
    };

    // ❌ KHÔNG append message tại đây nữa
    stompClient.send("/app/chat.send", {}, JSON.stringify(chatMessage));
    messageInput.value = "";
}

	function subscribeToMessages() {
	    const receiverUsername = '0928666622'; // hoặc dùng biến nếu động

	    stompClient.subscribe(`/topic/messages/${receiverUsername}`, function (messageOutput) {
	        const message = JSON.parse(messageOutput.body);
	        const sender = document.getElementById("loggedInUser").textContent.trim();
	        const chatList = document.getElementById("chatList");

	        // Tạo thẻ <li> đúng theo format giống Thymeleaf
	        const li = document.createElement("li");
	        li.textContent = message.content;

	        // Gán class theo người gửi
	        if (message.senderUsername === sender) {
	            li.className = "chat-message me";
	        } else {
	            li.className = "chat-message user";
	        }

	        chatList.appendChild(li);
	        chatList.scrollTop = chatList.scrollHeight;
	    });
	}

	// Initialize WebSocket connection when the page loads
	window.onload = function() {
	    connectWebSocket();
	    subscribeToMessages();
	
	};

	// Show login modal if user is not authenticated
	function showLoginModal() {
	    const myModal = new bootstrap.Modal(document.getElementById('loginModal'));
	    myModal.show();
	}

	function toggleChatBox() {
	    const chatBox = document.getElementById("miniChatBox");
	    chatBox.style.display = chatBox.style.display === "none" || chatBox.style.display === "" ? "flex" : "none";
	}

	
	
	function showAnswer(element) {
	    const questionText = element.textContent;
	    let answerText = "";

	    // Define answers to the questions
	    switch (questionText) {
	        case "Xin chào! Bạn cần hỗ trợ gì?":
	            answerText = "Chúng tôi cung cấp các dịch vụ hỗ trợ trực tuyến, vui lòng đăng nhập để nhắn tin trực tuyến.";
	            break;
	        case "Giới thiệu sản phẩm của bạn":
	            answerText = "Đê biết thêm chi tiết cụ thể sản.";
	            break;
	        case "Thông tin thanh toán":
	            answerText = "Chúng tôi chấp nhận thanh toán qua nhiều phương thức, bao gồm thẻ tín dụng và chuyển khoản ngân hàng.";
	            break;
	        case "Cách sử dụng website":
	            answerText = "Bạn có thể tìm kiếm sản phẩm, thêm vào giỏ hàng và thanh toán trực tiếp trên website.";
	            break;
	        case "Liên hệ với chúng tôi":
	            answerText = "Bạn có thể liên hệ qua email usspharmaco3007@gmail.com hoặc gọi số hotline: 092 866 66 22";
	            break;
	        default:
	            answerText = "Xin lỗi, chúng tôi không có câu trả lời cho câu hỏi này.";
	    }

	    // Create the answer element
	    const answer = document.createElement("div");
	    answer.classList.add("chat-answer");
	    answer.textContent = answerText;

	    // Append the answer at the end of the chat body, not after the question
	    const chatBody = document.getElementById("chatBody");
	    chatBody.appendChild(answer);

	    // Ensure the new answer is visible
	    answer.style.display = "block";

	    // Scroll the chat body to the bottom
	    chatBody.scrollTop = chatBody.scrollHeight;
	}

	

</script>
	<script type="application/ld+json" th:inline="javascript"
		th:utext="${schemaJson}">


</script>

</body>
</html>
